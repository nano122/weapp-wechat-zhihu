<!--answer.wxml-->
<view class="container">
    <!-- 加载中 -->
    <view class="loading" wx:if="{{!answer}}">
        <text>加载中...</text>
    </view>
    
    <block wx:if="{{answer}}">

        <!-- 标题区域 -->
        <view class="answer-header">
            <text class="answer-title" bindtap="toQuestion">{{answer.question.title}}</text>
            <view class="answer-meta">
                <text>知乎 · {{answer.question.answer_count || 94}} 个回答 · {{answer.question.follow_count || 177}} 人关注</text>
            </view>
        </view>

        <!-- 回答者信息 -->
        <view class="answerer-wrp">
            <view class="answerer">
                <view class="avatar">
                    <image src="{{answer.user.avatar_url}}"></image>
                </view>
                <view class="answerer-info">
                    <text class="answerer-name">{{answer.user.nickname}}</text>
                    <text class="answerer-tagline">{{answer.user.bio || '暂无个人简介'}}</text>
                    <text class="answerer-agreed">{{answer.like_count}} 人赞同了该回答</text>
                </view>
            </view>
        </view>
        
        <!-- 回答内容 -->
        <view class="answer-content">
            <text>{{answer.content}}</text>
        </view>

        <!-- 悬浮按钮 -->
        <view class="floating-next">
            <text>Next\n下一个</text>
        </view>

        <!-- 底部操作栏 -->
        <view class="answer-footer flex-wrp">
            <view class="vote-pill flex-item {{isLiked ? 'liked' : ''}}">
                <view class="vote-up expanded" bindtap="toggleLike">
                    <text class="triangle-up">▲</text>
                    <text class="vote-count">赞同 {{answer.like_count}}</text>
                </view>
                <view class="vote-down">
                    <text class="triangle-down">▼</text>
                </view>
            </view>
            
            <view class="operation-wrp flex-item">
                <view class="operation-btn" bindtap="toggleCollect">
                    <image src="../../images/{{isCollected ? 'star.png' : 'star2.png'}}" class="{{isCollected ? 'collected' : ''}}"></image>
                    <text wx:if="{{answer.collect_count > 0}}">{{answer.collect_count}}</text>
                </view>
                <view class="operation-btn" bindtap="toggleThank">
                    <image src="../../images/heart2.png" class="{{isThanked ? 'thanked' : ''}}"></image>
                </view>
                <view class="operation-btn" bindtap="viewComments">
                    <image src="../../images/comment.png"></image>
                    <text>{{answer.comment_count}}</text>
                </view>
                 <view class="operation-btn">
                    <image src="../../images/share.png" style="opacity: 0.5;"></image> <!-- Placeholder for share -->
                </view>
            </view>
        </view>
    </block>
</view>
