
<view class="container more">
  <!-- 用户信息区域 -->
  <view class="user flex-wrp" bindtap="viewProfile">
    <!-- 未登录状态 -->
    <block wx:if="{{!isLoggedIn}}">
      <view class="avatar flex-item" bindtap="handleLogin">
        <image class="userinfo-avatar" src="../../images/default_avatar.png" background-size="cover"></image>
      </view>
      <view class="user-info flex-item" bindtap="handleLogin">
        <text class="userinfo-nickname">点击登录</text>
        <text class="edit">登录后享受更多功能</text>
      </view>
    </block>
    
    <!-- 已登录状态 -->
    <block wx:if="{{isLoggedIn}}">
      <view class="avatar flex-item">
        <image class="userinfo-avatar" src="{{userInfo.avatar_url || '../../images/default_avatar.png'}}" background-size="cover"></image>
      </view>
      <view class="user-info flex-item">
        <text class="userinfo-nickname">{{userInfo.nickname}}</text>
        <text class="edit">查看或编辑个人主页</text>
      </view>
    </block>
  </view>

  <!-- 功能菜单 -->
  <view class="my">
    <view class="my-item flex-wrp" bindtap="goToFollowing">
      <view class="myitem-icon flex-item">
        <image src="../../images/eye.png"></image>
      </view>
      <view class="myitem-name flex-item">
        <text>我的关注</text>
      </view>
      <view class="myitem-arrow flex-item">
        <text>></text>
      </view>
    </view>
    
    <view class="my-item flex-wrp" bindtap="goToCollections">
      <view class="myitem-icon flex-item">
        <image src="../../images/star.png"></image>
      </view>
      <view class="myitem-name flex-item">
        <text>我的收藏</text>
      </view>
      <view class="myitem-arrow flex-item">
        <text>></text>
      </view>
    </view>

    <view class="my-item flex-wrp" bindtap="goToHistory">
      <view class="myitem-icon flex-item">
        <image src="../../images/recent.png"></image>
      </view>
      <view class="myitem-name flex-item">
        <text>最近浏览</text>
      </view>
      <view class="myitem-arrow flex-item">
        <text>></text>
      </view>
    </view>
  </view>

  <!-- 退出登录按钮 -->
  <view class="logout-section" wx:if="{{isLoggedIn}}">
    <view class="logout-btn" bindtap="handleLogout">
      <text>退出登录</text>
    </view>
  </view>
</view>
